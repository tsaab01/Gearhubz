<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KXB4P8MJ');</script>
    <!-- End Google Tag Manager -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Free Online Image Rotator & Flipper - Rotate & Flip Images | ToolsHub</title>
    <meta name="description" content="Rotate and flip images online for free! Fix orientation, create mirror effects, and adjust image angles. No signup required. Fast and easy to use.">
    <meta name="keywords" content="image rotator, rotate image online, flip image, image flipper, photo rotator, free image tool, online image editor, rotate photos">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Free Online Image Rotator & Flipper - ToolsHub">
    <meta property="og:description" content="Rotate and flip images online for free! Fix orientation, create mirror effects, and adjust image angles.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/image-rotator">
    <meta property="og:site_name" content="ToolsHub">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Free Online Image Rotator & Flipper">
    <meta name="twitter:description" content="Rotate and flip images online for free! Fix orientation, create mirror effects, and adjust image angles.">
    
    <!-- Canonical and other meta tags -->
    <link rel="canonical" href="https://yourdomain.com/image-rotator">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --gradient-primary: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            --shadow: 0 8px 25px rgba(67, 97, 238, 0.15);
            --deep-shadow: 0 15px 35px rgba(67, 97, 238, 0.25);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: white;
            box-shadow: var(--shadow);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .tool-header {
            text-align: center;
            padding: 3rem 0 2rem 0;
        }

        .tool-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .tool-header p {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .tool-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 768px) {
            .tool-container {
                grid-template-columns: 1fr;
            }
            
            .tool-header h1 {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .tool-container {
                gap: 1.5rem;
            }
        }

        .upload-section, .preview-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
            height: fit-content;
        }

        .section-title {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--dark);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--primary);
        }

        .upload-area {
            border: 2px dashed #e0e0e0;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 1.5rem;
            background: #fafafa;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.03);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .upload-text h4 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .upload-text p {
            color: #666;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .upload-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .rotation-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 1.5rem 0;
        }

        .rotate-btn, .flip-btn {
            padding: 12px;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .rotate-btn:hover, .flip-btn:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }

        .control-group {
            margin: 1.5rem 0;
        }

        .control-label {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-label i {
            color: var(--primary);
        }

        .action-btn {
            width: 100%;
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .action-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .action-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .preview-container {
            width: 100%;
            height: 300px;
            border: 2px dashed #e0e0e0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            overflow: hidden;
            background: #fafafa;
            position: relative;
        }

        .preview-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: none;
            transition: transform 0.3s ease;
        }

        .tool-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .info-item {
            background: var(--light);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .info-item h5 {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .info-item p {
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
        }

        .status-message {
            text-align: center;
            padding: 12px;
            margin-top: 15px;
            border-radius: 8px;
            display: none;
            font-weight: 500;
        }

        .status-message.success {
            background: #d4edda;
            color: #155724;
            display: block;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }

        .processing {
            text-align: center;
            color: var(--primary);
            display: none;
            padding: 15px;
        }

        .processing i {
            animation: spin 1s linear infinite;
            margin-right: 10px;
            font-size: 1.2rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            font-size: 0.9rem;
            background: white;
            border-radius: 12px;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* SEO Content Section */
        .seo-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .seo-content h2 {
            font-size: 1.8rem;
            margin: 25px 0 15px 0;
            color: var(--dark);
        }

        .seo-content h3 {
            font-size: 1.4rem;
            margin: 20px 0 10px 0;
            color: var(--dark);
        }

        .seo-content p {
            margin-bottom: 15px;
            color: #666;
        }

        .seo-content ul, .seo-content ol {
            margin: 15px 0 15px 30px;
            color: #666;
        }

        .seo-content li {
            margin-bottom: 10px;
        }

        .benefits-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .benefit-item {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
        }

        .benefit-item h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        /* Toggle Styles */
        .toggle-container {
            margin: 15px 0;
        }

        .toggle-header {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            transition: background 0.3s;
        }

        .toggle-header:hover {
            background: #e5e7eb;
        }

        .toggle-header h4 {
            margin: 0;
            color: var(--dark);
            font-size: 1.1rem;
        }

        .toggle-icon {
            transition: transform 0.3s;
        }

        .toggle-content {
            padding: 15px;
            background: white;
            border-left: 3px solid var(--primary);
            display: none;
        }

        .toggle-content.active {
            display: block;
        }

        .related-tools {
            margin-top: 30px;
            text-align: center;
        }

        .tools-grid {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .tool-link {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            transition: background 0.3s;
        }

        .tool-link:hover {
            background: var(--secondary);
        }

        @media (max-width: 768px) {
            .benefits-list {
                grid-template-columns: 1fr;
            }
            
            .rotation-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Image Rotator & Flipper",
      "description": "Free online tool to rotate and flip images to fix orientation and create mirror effects",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.6",
        "reviewCount": "950"
      }
    }
    </script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXB4P8MJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <header>
        <div class="container header-container">
            <a href="/" class="logo">
                <i class="fas fa-tools"></i> Tools Hub
            </a>
        </div>
    </header>

    <section class="tool-header">
        <div class="container">
            <h1><i class="fas fa-sync-alt"></i> Free Online Image Rotator & Flipper</h1>
            <p>Rotate and flip images online for free! Fix orientation, create mirror effects, and adjust image angles.</p>
        </div>
    </section>

    <section class="tool-main">
        <div class="container">
            <div class="tool-container">
                <!-- Upload Section -->
                <div class="upload-section">
                    <h3 class="section-title"><i class="fas fa-upload"></i> Upload Your Image</h3>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-text">
                            <h4>Drag & Drop or Click to Upload</h4>
                            <p>Supports JPG, PNG, GIF, WEBP (Max: 5MB)</p>
                        </div>
                        <button class="upload-btn" id="uploadBtn">
                            <i class="fas fa-folder-open"></i> Choose File
                        </button>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    </div>
                    
                    <div class="control-group">
                        <div class="control-label">
                            <i class="fas fa-redo"></i> Rotation Controls:
                        </div>
                        <div class="rotation-controls">
                            <button class="rotate-btn" id="rotateLeft">
                                <i class="fas fa-undo"></i> 90° Left
                            </button>
                            <button class="rotate-btn" id="rotateRight">
                                <i class="fas fa-redo"></i> 90° Right
                            </button>
                            <button class="flip-btn" id="flipHorizontal">
                                <i class="fas fa-arrows-alt-h"></i> Horizontal
                            </button>
                            <button class="flip-btn" id="flipVertical">
                                <i class="fas fa-arrows-alt-v"></i> Vertical
                            </button>
                        </div>
                    </div>

                    <button class="action-btn" id="downloadBtn" disabled>
                        <i class="fas fa-download"></i> Download Rotated Image
                    </button>
                </div>
                
                <!-- Preview Section -->
                <div class="preview-section">
                    <h3 class="section-title"><i class="fas fa-eye"></i> Preview & Download</h3>
                    <div class="preview-container" id="previewContainer">
                        <div style="text-align: center; color: #999;">
                            <i class="fas fa-image" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Your image will appear here</p>
                        </div>
                        <img id="previewImage" alt="Preview">
                    </div>
                    
                    <div class="processing" id="processing">
                        <i class="fas fa-spinner"></i> Processing image...
                    </div>
                    
                    <div class="tool-info">
                        <div class="info-item">
                            <h5>ORIGINAL SIZE</h5>
                            <p id="originalSize">-</p>
                        </div>
                        <div class="info-item">
                            <h5>CURRENT ROTATION</h5>
                            <p id="currentRotation">0°</p>
                        </div>
                        <div class="info-item">
                            <h5>FLIP STATUS</h5>
                            <p id="flipStatus">None</p>
                        </div>
                        <div class="info-item">
                            <h5>DIMENSIONS</h5>
                            <p id="imageDimensions">-</p>
                        </div>
                    </div>
                    
                    <div class="status-message" id="statusMessage"></div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- SEO Content Section -->
    <section class="seo-content">
        <article>
            <h2>What is an Online Image Rotator & Flipper?</h2>
            <p>An online image rotator and flipper is a free web-based tool that allows you to adjust the orientation of your digital images. Whether you need to fix photos taken in the wrong orientation, create mirror effects, or rotate images to specific angles, our tool makes it quick and easy without compromising quality.</p>
            
            <h2>Why Use Our Free Image Rotator & Flipper?</h2>
            <div class="benefits-list">
                <div class="benefit-item">
                    <h4><i class="fas fa-bolt"></i> Instant Processing</h4>
                    <p>Rotate and flip images in seconds with our optimized processing engine.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-lock"></i> Privacy Protected</h4>
                    <p>Your images are processed locally and never stored on our servers.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-mobile-alt"></i> Works on All Devices</h4>
                    <p>Use on desktop, tablet, or mobile phone with any browser.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-infinity"></i> Unlimited Usage</h4>
                    <p>Rotate and flip as many images as you want - completely free.</p>
                </div>
            </div>
            
            <h2>Common Use Cases</h2>
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('use1')">
                    <h4>Fix Photo Orientation</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-use1"></i>
                </div>
                <div class="toggle-content" id="content-use1">
                    <p>Correct photos taken in portrait mode that appear sideways or upside down. This is especially common with smartphone photos where the orientation sensor may not capture the correct rotation. Our tool helps you quickly fix these orientation issues with simple 90-degree rotations.</p>
                </div>
            </div>
            
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('use2')">
                    <h4>Create Mirror Effects</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-use2"></i>
                </div>
                <div class="toggle-content" id="content-use2">
                    <p>Flip images horizontally to create mirror reflections or vertically for artistic effects. This is perfect for creating symmetrical designs, preparing images for printing, or achieving specific visual effects in your creative projects. Horizontal flipping is especially useful for text that needs to appear correctly in mirrored displays.</p>
                </div>
            </div>
            
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('use3')">
                    <h4>Graphic Design & Layout</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-use3"></i>
                </div>
                <div class="toggle-content" id="content-use3">
                    <p>Adjust image orientation for web design, social media posts, presentations, and print materials. Rotate elements to fit specific layouts, create dynamic compositions, or align images with design grids. Perfect for designers who need precise control over image positioning and orientation.</p>
                </div>
            </div>
            
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('use4')">
                    <h4>Photo Editing & Enhancement</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-use4"></i>
                </div>
                <div class="toggle-content" id="content-use4">
                    <p>Enhance your photography workflow by quickly adjusting image orientation before final editing. Rotate photos to achieve the perfect composition, flip elements for creative effects, or correct perspective issues. This tool integrates seamlessly into your photo editing process as a quick preprocessing step.</p>
                </div>
            </div>
            
            <h2>How to Use the Image Rotator & Flipper</h2>
            <ol>
                <li><strong>Upload</strong> - Click "Choose File" or drag and drop your image onto the upload area</li>
                <li><strong>Rotate</strong> - Use the rotation buttons to turn your image 90 degrees left or right</li>
                <li><strong>Flip</strong> - Flip horizontally for mirror effects or vertically for artistic adjustments</li>
                <li><strong>Preview</strong> - See real-time changes in the preview window</li>
                <li><strong>Download</strong> - Click "Download Rotated Image" to save your edited file</li>
            </ol>
            
            <div class="faq-section">
                <h2>Frequently Asked Questions</h2>
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq1')">
                        <h4>Is this image rotator really free?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq1"></i>
                    </div>
                    <div class="toggle-content" id="content-faq1">
                        <p>Yes, our image rotator and flipper is completely free to use with no limitations, registrations, or watermarks. Rotate and flip as many images as you need at no cost. We believe in providing valuable tools without hidden fees or premium restrictions.</p>
                    </div>
                </div>
                
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq2')">
                        <h4>What file formats are supported?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq2"></i>
                    </div>
                    <div class="toggle-content" id="content-faq2">
                        <p>We support all major image formats for upload including JPG, JPEG, PNG, GIF, and WEBP. The rotated/flipped output will be in JPG format for optimal compatibility and file size. Our system automatically converts your images to the most efficient format for web use.</p>
                    </div>
                </div>
                
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq3')">
                        <h4>Will my image quality be affected?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq3"></i>
                    </div>
                    <div class="toggle-content" id="content-faq3">
                        <p>Rotation and flipping operations maintain the original image quality since they don't involve compression or resampling. The output image retains the same resolution and clarity as the original. For best results, start with high-quality source images.</p>
                    </div>
                </div>
                
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq4')">
                        <h4>Is my privacy protected?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq4"></i>
                    </div>
                    <div class="toggle-content" id="content-faq4">
                        <p>Absolutely. Your images are processed directly in your browser and never uploaded to our servers. We don't store or access your files in any way. Once you close the browser tab, all processed data is automatically deleted from your device's memory.</p>
                    </div>
                </div>
            </div>
            
            <div class="related-tools">
                <h3>Related Free Tools</h3>
                <div class="tools-grid">
                    <a href="/image-resizer" class="tool-link">Image Resizer</a>
                    <a href="/image-compressor" class="tool-link">Image Compressor</a>
                    <a href="/image-cropper" class="tool-link">Image Cropper</a>
                    <a href="/image-converter" class="tool-link">Image Converter</a>
                </div>
            </div>
        </article>
    </section>

    <footer>
        <div class="container">
            <p>© 2023 Tools Hub - Your Daily Tools, All At One Place</p>
        </div>
    </footer>
    
    <!-- Adsterra Ad Code -->
    <script async="async" data-cfasync="false" src="//pl28047254.effectivegatecpm.com/a066ce0b5c2ab4f8b4fedb09d93370eb/invoke.js"></script>
    <div id="container-a066ce0b5c2ab4f8b4fedb09d93370eb"></div>
    <!-- End Adsterra Ad Code -->

    <script>
        // Toggle functionality
        function toggleContent(id) {
            const content = document.getElementById('content-' + id);
            const icon = document.getElementById('icon-' + id);
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('active');
                icon.style.transform = 'rotate(180deg)';
            }
        }
        
        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const uploadBtn = document.getElementById('uploadBtn');
        const fileInput = document.getElementById('fileInput');
        const previewContainer = document.getElementById('previewContainer');
        const previewImage = document.getElementById('previewImage');
        const rotateLeftBtn = document.getElementById('rotateLeft');
        const rotateRightBtn = document.getElementById('rotateRight');
        const flipHorizontalBtn = document.getElementById('flipHorizontal');
        const flipVerticalBtn = document.getElementById('flipVertical');
        const downloadBtn = document.getElementById('downloadBtn');
        const originalSizeEl = document.getElementById('originalSize');
        const currentRotationEl = document.getElementById('currentRotation');
        const flipStatusEl = document.getElementById('flipStatus');
        const imageDimensionsEl = document.getElementById('imageDimensions');
        const processing = document.getElementById('processing');
        const statusMessage = document.getElementById('statusMessage');

        // Variables
        let originalFile = null;
        let originalSize = 0;
        let currentRotation = 0;
        let isFlippedHorizontal = false;
        let isFlippedVertical = false;
        let originalWidth = 0;
        let originalHeight = 0;

        // Event Listeners
        uploadBtn.addEventListener('click', () => fileInput.click());
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#4361ee';
            uploadArea.style.background = 'rgba(67, 97, 238, 0.05)';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#e0e0e0';
            uploadArea.style.background = '#fafafa';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#e0e0e0';
            uploadArea.style.background = '#fafafa';
            
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) {
                handleFile(e.target.files[0]);
            }
        });

        rotateLeftBtn.addEventListener('click', () => rotateImage(-90));
        rotateRightBtn.addEventListener('click', () => rotateImage(90));
        flipHorizontalBtn.addEventListener('click', () => flipImage('horizontal'));
        flipVerticalBtn.addEventListener('click', () => flipImage('vertical'));
        downloadBtn.addEventListener('click', downloadRotatedImage);

        // Helper Functions
        function validateFile(file, maxSizeMB = 5) {
            const maxSize = maxSizeMB * 1024 * 1024;
            const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
            
            if (file.size === 0) {
                return { isValid: false, errors: ['File is empty.'] };
            }
            
            if (!allowedTypes.includes(file.type)) {
                return { isValid: false, errors: ['Unsupported file type. Please use JPG, PNG, GIF, or WEBP.'] };
            }
            
            if (file.size > maxSize) {
                return { isValid: false, errors: [`File too large. Maximum size is ${maxSizeMB}MB.`] };
            }
            
            const extension = file.name.split('.').pop().toLowerCase();
            return { 
                isValid: true, 
                fileInfo: { extension } 
            };
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function showStatus(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = 'status-message';
            if (type) {
                statusMessage.classList.add(type);
            }
        }

        // Main Functions
        function handleFile(file) {
            // Reset previous state
            resetState();
            
            // Validate file
            const validation = validateFile(file, 5);
            if (!validation.isValid) {
                showStatus(validation.errors[0], 'error');
                return;
            }

            originalFile = file;
            originalSize = file.size;
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    originalWidth = this.width;
                    originalHeight = this.height;
                    
                    // Update preview
                    previewImage.src = e.target.result;
                    previewImage.style.display = 'block';
                    previewContainer.querySelector('div').style.display = 'none';
                    
                    // Update file info
                    originalSizeEl.textContent = formatFileSize(file.size);
                    imageDimensionsEl.textContent = `${originalWidth} × ${originalHeight} px`;
                    
                    // Enable download button
                    downloadBtn.disabled = false;
                    
                    showStatus('Image loaded successfully! Use the controls to rotate or flip.', 'success');
                    
                    // Track upload event
                    if (typeof dataLayer !== 'undefined') {
                        dataLayer.push({
                            'event': 'tool_upload',
                            'toolName': 'Image Rotator',
                            'fileType': validation.fileInfo.extension,
                            'fileSize': file.size
                        });
                    }
                };
                
                img.onerror = function() {
                    showStatus('Error loading image. Please try a different file.', 'error');
                };
                
                img.src = e.target.result;
            };
            
            reader.onerror = function() {
                showStatus('Error reading file. Please try again.', 'error');
            };
            
            reader.readAsDataURL(file);
        }

        function rotateImage(degrees) {
            if (!originalFile) {
                showStatus('Please upload an image first.', 'error');
                return;
            }

            currentRotation = (currentRotation + degrees) % 360;
            if (currentRotation < 0) currentRotation += 360;
            
            updateTransform();
            updateInfoDisplay();
            showStatus(`Image rotated ${degrees}°`, 'success');
        }

        function flipImage(direction) {
            if (!originalFile) {
                showStatus('Please upload an image first.', 'error');
                return;
            }

            if (direction === 'horizontal') {
                isFlippedHorizontal = !isFlippedHorizontal;
            } else if (direction === 'vertical') {
                isFlippedVertical = !isFlippedVertical;
            }
            
            updateTransform();
            updateInfoDisplay();
            showStatus(`Image flipped ${direction}`, 'success');
        }

        function updateTransform() {
            let transform = '';
            
            if (currentRotation !== 0) {
                transform += `rotate(${currentRotation}deg) `;
            }
            
            if (isFlippedHorizontal) {
                transform += 'scaleX(-1) ';
            }
            
            if (isFlippedVertical) {
                transform += 'scaleY(-1) ';
            }
            
            previewImage.style.transform = transform.trim();
        }

        function updateInfoDisplay() {
            currentRotationEl.textContent = `${currentRotation}°`;
            
            let flipText = 'None';
            if (isFlippedHorizontal && isFlippedVertical) {
                flipText = 'Both';
            } else if (isFlippedHorizontal) {
                flipText = 'Horizontal';
            } else if (isFlippedVertical) {
                flipText = 'Vertical';
            }
            flipStatusEl.textContent = flipText;
            
            // Update dimensions if rotated 90/270 degrees
            if (currentRotation === 90 || currentRotation === 270) {
                imageDimensionsEl.textContent = `${originalHeight} × ${originalWidth} px`;
            } else {
                imageDimensionsEl.textContent = `${originalWidth} × ${originalHeight} px`;
            }
        }

        function downloadRotatedImage() {
            if (!originalFile) {
                showStatus('Please upload an image first.', 'error');
                return;
            }

            processing.style.display = 'flex';
            downloadBtn.disabled = true;
            showStatus('Processing image...', '');

            setTimeout(() => {
                try {
                    // Create canvas for rotation/flipping
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Calculate canvas dimensions based on rotation
                    let canvasWidth = originalWidth;
                    let canvasHeight = originalHeight;
                    
                    if (currentRotation === 90 || currentRotation === 270) {
                        canvasWidth = originalHeight;
                        canvasHeight = originalWidth;
                    }
                    
                    canvas.width = canvasWidth;
                    canvas.height = canvasHeight;
                    
                    // Draw the rotated/flipped image
                    ctx.save();
                    ctx.translate(canvasWidth / 2, canvasHeight / 2);
                    ctx.rotate((currentRotation * Math.PI) / 180);
                    
                    // Apply flips
                    let scaleX = isFlippedHorizontal ? -1 : 1;
                    let scaleY = isFlippedVertical ? -1 : 1;
                    ctx.scale(scaleX, scaleY);
                    
                    // Draw image centered
                    ctx.drawImage(
                        previewImage,
                        -originalWidth / 2,
                        -originalHeight / 2,
                        originalWidth,
                        originalHeight
                    );
                    ctx.restore();
                    
                    // Convert to blob and download
                    canvas.toBlob(function(blob) {
                        if (blob) {
                            const url = URL.createObjectURL(blob);
                            const link = document.createElement('a');
                            const filename = getRotatedFilename(originalFile.name);
                            link.download = filename;
                            link.href = url;
                            
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                            
                            URL.revokeObjectURL(url);
                            
                            showStatus(`Successfully downloaded ${filename}`, 'success');
                            
                            // Show success message
                            showSuccessMessage(`✓ Downloaded: ${filename}`);
                            
                            // Track download event
                            if (typeof dataLayer !== 'undefined') {
                                dataLayer.push({
                                    'event': 'tool_download',
                                    'toolName': 'Image Rotator',
                                    'fileSize': blob.size,
                                    'rotation': currentRotation,
                                    'flipHorizontal': isFlippedHorizontal,
                                    'flipVertical': isFlippedVertical
                                });
                            }
                        } else {
                            showStatus('Processing failed. Please try again.', 'error');
                        }
                        
                        processing.style.display = 'none';
                        downloadBtn.disabled = false;
                    }, 'image/jpeg', 0.9);
                    
                } catch (error) {
                    console.error('Download error:', error);
                    showStatus(`Error: ${error.message || 'Processing failed'}`, 'error');
                    processing.style.display = 'none';
                    downloadBtn.disabled = false;
                }
            }, 100);
        }

        function getRotatedFilename(originalName) {
            const nameWithoutExt = originalName.substring(0, originalName.lastIndexOf('.')) || originalName;
            return `${nameWithoutExt}_rotated.jpg`;
        }

        function resetState() {
            originalFile = null;
            currentRotation = 0;
            isFlippedHorizontal = false;
            isFlippedVertical = false;
            downloadBtn.disabled = true;
            processing.style.display = 'none';
            showStatus('', '');
            updateTransform();
            updateInfoDisplay();
        }

        // Success message function
        function showSuccessMessage(message) {
            const successMessage = document.createElement('div');
            successMessage.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-weight: 500;
            `;
            successMessage.textContent = message;
            document.body.appendChild(successMessage);

            setTimeout(() => {
                if (successMessage.parentNode) {
                    successMessage.parentNode.removeChild(successMessage);
                }
            }, 3000);
        }

        // Ensure page loads properly
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Image Rotator page loaded successfully');
        });
    </script>
</body>
</html>
