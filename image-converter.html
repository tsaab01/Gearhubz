<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KXB4P8MJ');</script>
    <!-- End Google Tag Manager -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Free Online Image Converter - Convert JPG to PNG, PNG to JPG | ToolsHub</title>
    <meta name="description" content="Convert images between formats instantly! Free online image converter for JPG, PNG, GIF, WEBP. No signup required. Fast and easy to use.">
    <meta name="keywords" content="image converter, convert image online, jpg to png, png to jpg, gif to png, webp converter, free image converter, online image tool">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Free Online Image Converter - ToolsHub">
    <meta property="og:description" content="Convert your images between different formats instantly. JPG to PNG, PNG to JPG, GIF to PNG, and more. Completely free!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/image-converter">
    <meta property="og:site_name" content="ToolsHub">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Free Online Image Converter">
    <meta name="twitter:description" content="Convert images between formats instantly! Free online image converter for JPG, PNG, GIF, WEBP.">
    
    <!-- Canonical and other meta tags -->
    <link rel="canonical" href="https://yourdomain.com/image-converter">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --gradient-primary: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            --shadow: 0 8px 25px rgba(67, 97, 238, 0.15);
            --deep-shadow: 0 15px 35px rgba(67, 97, 238, 0.25);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: white;
            box-shadow: var(--shadow);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .tool-header {
            text-align: center;
            padding: 3rem 0 2rem 0;
        }

        .tool-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .tool-header p {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .converter-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 768px) {
            .converter-container {
                grid-template-columns: 1fr;
            }
            
            .tool-header h1 {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .converter-container {
                gap: 1.5rem;
            }
        }

        .upload-section, .preview-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
            height: fit-content;
        }

        .section-title {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--dark);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--primary);
        }

        .upload-area {
            border: 2px dashed #e0e0e0;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 1.5rem;
            background: #fafafa;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.03);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .upload-text h4 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .upload-text p {
            color: #666;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .upload-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .format-options {
            margin: 1.5rem 0;
        }

        .format-label {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .format-label i {
            color: var(--primary);
        }

        .format-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .format-btn {
            padding: 10px 20px;
            border: 1px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            min-width: 80px;
            text-align: center;
        }

        .format-btn:hover {
            border-color: var(--primary);
        }

        .format-btn.active {
            background: var(--gradient-primary);
            color: white;
            border-color: var(--primary);
        }

        .quality-slider {
            margin: 1.5rem 0;
        }

        .quality-label {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quality-label i {
            color: var(--primary);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-container label {
            min-width: 60px;
            font-weight: 600;
            color: var(--primary);
        }

        .slider-container input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .image-preview {
            width: 100%;
            height: 250px;
            border: 2px dashed #e0e0e0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            overflow: hidden;
            background: #fafafa;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .image-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .info-item {
            background: var(--light);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .info-item h5 {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .info-item p {
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
        }

        .download-btn {
            width: 100%;
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .download-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .download-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .status-message {
            text-align: center;
            padding: 12px;
            margin-top: 15px;
            border-radius: 8px;
            display: none;
            font-weight: 500;
        }

        .status-message.success {
            background: #d4edda;
            color: #155724;
            display: block;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }

        .processing {
            text-align: center;
            color: var(--primary);
            display: none;
            padding: 15px;
        }

        .processing i {
            animation: spin 1s linear infinite;
            margin-right: 10px;
            font-size: 1.2rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            font-size: 0.9rem;
            background: white;
            border-radius: 12px;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* SEO Content Section */
        .seo-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .seo-content h2 {
            font-size: 1.8rem;
            margin: 25px 0 15px 0;
            color: var(--dark);
        }

        .seo-content h3 {
            font-size: 1.4rem;
            margin: 20px 0 10px 0;
            color: var(--dark);
        }

        .seo-content p {
            margin-bottom: 15px;
            color: #666;
        }

        .seo-content ul, .seo-content ol {
            margin: 15px 0 15px 30px;
            color: #666;
        }

        .seo-content li {
            margin-bottom: 10px;
        }

        .benefits-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .benefit-item {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
        }

        .benefit-item h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        /* Toggle Styles */
        .toggle-container {
            margin: 15px 0;
        }

        .toggle-header {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            transition: background 0.3s;
        }

        .toggle-header:hover {
            background: #e5e7eb;
        }

        .toggle-header h4 {
            margin: 0;
            color: var(--dark);
            font-size: 1.1rem;
        }

        .toggle-icon {
            transition: transform 0.3s;
        }

        .toggle-content {
            padding: 15px;
            background: white;
            border-left: 3px solid var(--primary);
            display: none;
        }

        .toggle-content.active {
            display: block;
        }

        .related-tools {
            margin-top: 30px;
            text-align: center;
        }

        .tools-grid {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .tool-link {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            transition: background 0.3s;
        }

        .tool-link:hover {
            background: var(--secondary);
        }

        @media (max-width: 768px) {
            .benefits-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Image Converter",
      "description": "Free online tool to convert images between different formats",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "1350"
      }
    }
    </script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KXB4P8MJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <header>
        <div class="container header-container">
            <a href="#" class="logo" onclick="window.location.reload(); return false;">
                <i class="fas fa-tools"></i> Tools Hub
            </a>
        </div>
    </header>

    <section class="tool-header">
        <div class="container">
            <h1><i class="fas fa-file-image"></i> Free Online Image Converter</h1>
            <p>Convert your images to different formats quickly and easily</p>
        </div>
    </section>

    <section class="converter-tool">
        <div class="container">
            <div class="converter-container">
                <!-- Upload Section -->
                <div class="upload-section">
                    <h3 class="section-title"><i class="fas fa-upload"></i> Upload Your Image</h3>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-text">
                            <h4>Drag & Drop or Click to Upload</h4>
                            <p>Supports JPG, PNG, GIF, WEBP (Max: 5MB)</p>
                        </div>
                        <button class="upload-btn" id="uploadBtn">
                            <i class="fas fa-folder-open"></i> Choose File
                        </button>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    </div>
                    
                    <div class="format-options">
                        <div class="format-label">
                            <i class="fas fa-exchange-alt"></i> Convert To:
                        </div>
                        <div class="format-buttons">
                            <button class="format-btn active" data-format="jpeg">JPEG</button>
                            <button class="format-btn" data-format="png">PNG</button>
                            <button class="format-btn" data-format="webp">WEBP</button>
                        </div>
                    </div>

                    <div class="quality-slider">
                        <div class="quality-label">
                            <i class="fas fa-sliders-h"></i> Quality:
                        </div>
                        <div class="slider-container">
                            <input type="range" id="qualityRange" min="10" max="100" value="80">
                            <label for="qualityRange" id="qualityValue">80</label>%
                        </div>
                    </div>
                </div>
                
                <!-- Preview Section -->
                <div class="preview-section">
                    <h3 class="section-title"><i class="fas fa-eye"></i> Preview & Download</h3>
                    <div class="image-preview" id="imagePreview">
                        <div style="text-align: center; color: #999;">
                            <i class="fas fa-image" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Your image will appear here</p>
                        </div>
                    </div>
                    
                    <div class="processing" id="processing">
                        <i class="fas fa-spinner"></i> Processing image...
                    </div>
                    
                    <div class="image-info">
                        <div class="info-item">
                            <h5>FORMAT</h5>
                            <p id="formatInfo">-</p>
                        </div>
                        <div class="info-item">
                            <h5>SIZE</h5>
                            <p id="sizeInfo">-</p>
                        </div>
                        <div class="info-item">
                            <h5>DIMENSIONS</h5>
                            <p id="dimensionsInfo">-</p>
                        </div>
                        <div class="info-item">
                            <h5>QUALITY</h5>
                            <p id="qualityInfo">-</p>
                        </div>
                    </div>
                    
                    <button class="download-btn" id="downloadBtn" disabled>
                        <i class="fas fa-download"></i> Download Converted Image
                    </button>
                    <div class="status-message" id="statusMessage"></div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- SEO Content Section -->
    <section class="seo-content">
        <article>
            <h2>What is an Online Image Converter?</h2>
            <p>An online image converter is a free web-based tool that allows you to change the file format of your digital images. Whether you need to convert JPG to PNG, PNG to JPG, GIF to PNG, or any other image format combination, our tool makes it quick and easy without compromising quality.</p>
            
            <h2>Why Use Our Free Image Converter?</h2>
            <div class="benefits-list">
                <div class="benefit-item">
                    <h4><i class="fas fa-bolt"></i> Instant Conversion</h4>
                    <p>Convert images in seconds with our optimized processing engine.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-lock"></i> Privacy Protected</h4>
                    <p>Your images are processed locally and never stored on our servers.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-mobile-alt"></i> Works on All Devices</h4>
                    <p>Use on desktop, tablet, or mobile phone with any browser.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-infinity"></i> Unlimited Conversions</h4>
                    <p>Convert as many images as you want - completely free forever.</p>
                </div>
            </div>
            
            <h2>Popular Image Format Conversions</h2>
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('conv1')">
                    <h4>JPG to PNG Conversion</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-conv1"></i>
                </div>
                <div class="toggle-content" id="content-conv1">
                    <p>Convert JPG images to PNG format to preserve transparency and achieve lossless compression. PNG is ideal for graphics, logos, and images with text where quality is paramount. This conversion is perfect for web designers and digital artists who need crisp, clear images.</p>
                </div>
            </div>
            
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('conv2')">
                    <h4>PNG to JPG Conversion</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-conv2"></i>
                </div>
                <div class="toggle-content" id="content-conv2">
                    <p>Convert PNG images to JPG format to reduce file size for web use and email sharing. JPG format is widely supported and produces smaller files, making it perfect for photographs and images with many colors. This conversion helps optimize images for faster loading websites.</p>
                </div>
            </div>
            
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('conv3')">
                    <h4>GIF to PNG Conversion</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-conv3"></i>
                </div>
                    <div class="toggle-content" id="content-conv3">
                    <p>Convert GIF images to PNG format to achieve better quality and support for more colors. PNG offers superior image quality compared to GIF and supports millions of colors versus GIF's 256-color limitation. This conversion is ideal for upgrading older graphics to modern standards.</p>
                </div>
            </div>
            
            <div class="toggle-container">
                <div class="toggle-header" onclick="toggleContent('conv4')">
                    <h4>WEBP to JPG/PNG Conversion</h4>
                    <i class="fas fa-chevron-down toggle-icon" id="icon-conv4"></i>
                </div>
                <div class="toggle-content" id="content-conv4">
                    <p>Convert modern WEBP images to widely-compatible JPG or PNG formats. While WEBP offers excellent compression, not all platforms support it. Converting to JPG or PNG ensures compatibility across all devices, browsers, and applications.</p>
                </div>
            </div>
            
            <h2>How to Use the Image Converter</h2>
            <ol>
                <li><strong>Upload</strong> - Click "Choose File" or drag and drop your image onto the upload area</li>
                <li><strong>Select Format</strong> - Choose your desired output format (JPG, PNG, or WEBP)</li>
                <li><strong>Adjust Quality</strong> - Use the slider to control output quality (PNG is lossless)</li>
                <li><strong>Convert</strong> - Click "Download Converted Image" to process and download your file</li>
            </ol>
            
            <div class="faq-section">
                <h2>Frequently Asked Questions</h2>
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq1')">
                        <h4>Is this image converter really free?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq1"></i>
                    </div>
                    <div class="toggle-content" id="content-faq1">
                        <p>Yes, our image converter is completely free to use with no limitations, registrations, or watermarks. Convert as many images as you need at no cost. We believe in providing valuable tools without hidden fees or premium restrictions.</p>
                    </div>
                </div>
                
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq2')">
                        <h4>What file formats are supported?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq2"></i>
                    </div>
                    <div class="toggle-content" id="content-faq2">
                        <p>We support all major image formats for upload including JPG, JPEG, PNG, GIF, and WEBP. You can convert to JPG, PNG, or WEBP formats. Our system automatically detects your input format and allows conversion to any of our supported output formats.</p>
                    </div>
                </div>
                
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq3')">
                        <h4>Will my image quality be affected?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq3"></i>
                    </div>
                    <div class="toggle-content" id="content-faq3">
                        <p>For PNG output, quality is completely preserved as PNG is a lossless format. For JPG and WEBP outputs, you can control quality using the slider (10-100%). Higher values preserve more detail but result in larger file sizes. We recommend 80-90% quality for most images.</p>
                    </div>
                </div>
                
                <div class="toggle-container">
                    <div class="toggle-header" onclick="toggleContent('faq4')">
                        <h4>Is my privacy protected?</h4>
                        <i class="fas fa-chevron-down toggle-icon" id="icon-faq4"></i>
                    </div>
                    <div class="toggle-content" id="content-faq4">
                        <p>Absolutely. Your images are processed directly in your browser and never uploaded to our servers. We don't store or access your files in any way. Once you close the browser tab, all processed data is automatically deleted from your device's memory.</p>
                    </div>
                </div>
            </div>
            
            <div class="related-tools">
                <h3>Related Free Tools</h3>
                <div class="tools-grid">
                    <a href="/image-resizer" class="tool-link">Image Resizer</a>
                    <a href="/image-compressor" class="tool-link">Image Compressor</a>
                    <a href="/pdf-converter" class="tool-link">PDF Converter</a>
                    <a href="/file-converter" class="tool-link">File Converter</a>
                </div>
            </div>
        </article>
    </section>

    <footer>
        <div class="container">
            <p>© 2023 Tools Hub - Your Daily Tools, All At One Place</p>
        </div>
    </footer>
    
    <!-- Adsterra Ad Code -->
    <script async="async" data-cfasync="false" src="//pl28047254.effectivegatecpm.com/a066ce0b5c2ab4f8b4fedb09d93370eb/invoke.js"></script>
    <div id="container-a066ce0b5c2ab4f8b4fedb09d93370eb"></div>
    <!-- End Adsterra Ad Code -->

    <script>
        // Toggle functionality
        function toggleContent(id) {
            const content = document.getElementById('content-' + id);
            const icon = document.getElementById('icon-' + id);
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('active');
                icon.style.transform = 'rotate(180deg)';
            }
        }
        
        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const uploadBtn = document.getElementById('uploadBtn');
        const fileInput = document.getElementById('fileInput');
        const imagePreview = document.getElementById('imagePreview');
        const formatInfo = document.getElementById('formatInfo');
        const sizeInfo = document.getElementById('sizeInfo');
        const dimensionsInfo = document.getElementById('dimensionsInfo');
        const qualityInfo = document.getElementById('qualityInfo');
        const downloadBtn = document.getElementById('downloadBtn');
        const formatButtons = document.querySelectorAll('.format-btn');
        const qualityRange = document.getElementById('qualityRange');
        const qualityValue = document.getElementById('qualityValue');
        const processing = document.getElementById('processing');
        const statusMessage = document.getElementById('statusMessage');

        // Variables
        let currentImage = null;
        let originalFile = null;
        let selectedFormat = 'jpeg';
        let quality = 0.8;

        // Event Listeners
        uploadBtn.addEventListener('click', () => fileInput.click());
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#4361ee';
            uploadArea.style.background = 'rgba(67, 97, 238, 0.05)';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#e0e0e0';
            uploadArea.style.background = '#fafafa';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#e0e0e0';
            uploadArea.style.background = '#fafafa';
            
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) {
                handleFile(e.target.files[0]);
            }
        });

        downloadBtn.addEventListener('click', convertAndDownload);

        formatButtons.forEach(button => {
            button.addEventListener('click', () => {
                formatButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                selectedFormat = button.getAttribute('data-format');
                updateQualityInfo();
                updateDownloadButton();
            });
        });

        qualityRange.addEventListener('input', (e) => {
            quality = e.target.value / 100;
            qualityValue.textContent = e.target.value;
            updateQualityInfo();
            updateDownloadButton();
        });

        // Helper Functions
        function validateFile(file, maxSizeMB = 5) {
            const maxSize = maxSizeMB * 1024 * 1024;
            const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
            
            if (file.size === 0) {
                return { isValid: false, errors: ['File is empty.'] };
            }
            
            if (!allowedTypes.includes(file.type)) {
                return { isValid: false, errors: ['Unsupported file type. Please use JPG, PNG, GIF, or WEBP.'] };
            }
            
            if (file.size > maxSize) {
                return { isValid: false, errors: [`File too large. Maximum size is ${maxSizeMB}MB.`] };
            }
            
            const extension = file.name.split('.').pop().toLowerCase();
            return { 
                isValid: true, 
                fileInfo: { extension } 
            };
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function showStatus(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = 'status-message';
            if (type) {
                statusMessage.classList.add(type);
            }
        }

        // Main Functions
        function handleFile(file) {
            // Reset previous state
            resetState();
            
            // Validate file
            const validation = validateFile(file, 5);
            if (!validation.isValid) {
                showStatus(validation.errors[0], 'error');
                return;
            }

            originalFile = file;
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
                currentImage = new Image();
                currentImage.onload = function() {
                    // Update preview
                    imagePreview.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    imagePreview.appendChild(img);
                    
                    // Update file info
                    formatInfo.textContent = validation.fileInfo.extension.toUpperCase();
                    sizeInfo.textContent = formatFileSize(file.size);
                    dimensionsInfo.textContent = `${currentImage.width} × ${currentImage.height}`;
                    updateQualityInfo();
                    
                    // Enable download button
                    updateDownloadButton();
                    showStatus('Image loaded successfully! Select format and click download.', 'success');
                    
                    // Track upload event
                    if (typeof dataLayer !== 'undefined') {
                        dataLayer.push({
                            'event': 'tool_upload',
                            'toolName': 'Image Converter',
                            'fileType': validation.fileInfo.extension,
                            'fileSize': file.size
                        });
                    }
                };
                
                currentImage.onerror = function() {
                    showStatus('Error loading image. Please try a different file.', 'error');
                };
                
                currentImage.src = e.target.result;
            };
            
            reader.onerror = function() {
                showStatus('Error reading file. Please try again.', 'error');
            };
            
            reader.readAsDataURL(file);
        }

        function convertAndDownload() {
            if (!currentImage || !originalFile) {
                showStatus('Please upload an image first.', 'error');
                return;
            }

            processing.style.display = 'flex';
            downloadBtn.disabled = true;
            showStatus('Processing image...', '');

            setTimeout(() => {
                try {
                    // Create canvas
                    const canvas = document.createElement('canvas');
                    canvas.width = currentImage.width;
                    canvas.height = currentImage.height;
                    const ctx = canvas.getContext('2d');
                    
                    // Fill canvas with white background for JPEG conversion
                    if (selectedFormat === 'jpeg') {
                        ctx.fillStyle = 'white';
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                    }
                    
                    ctx.drawImage(currentImage, 0, 0);

                    // Get MIME type for selected format
                    let mimeType = 'image/jpeg';
                    if (selectedFormat === 'png') {
                        mimeType = 'image/png';
                    } else if (selectedFormat === 'webp') {
                        mimeType = 'image/webp';
                    }

                    // Convert quality for different formats
                    let canvasQuality = quality;
                    if (selectedFormat === 'png') {
                        canvasQuality = undefined; // PNG is lossless
                    }

                    // Get data URL from canvas
                    let dataURL;
                    try {
                        if (canvasQuality !== undefined) {
                            dataURL = canvas.toDataURL(mimeType, canvasQuality);
                        } else {
                            dataURL = canvas.toDataURL(mimeType);
                        }
                    } catch (canvasError) {
                        console.error('Canvas conversion error:', canvasError);
                        throw new Error('Failed to convert image. Try a different format.');
                    }

                    // Create download link
                    const link = document.createElement('a');
                    const convertedFilename = getConvertedFilename(originalFile.name, selectedFormat);
                    link.download = convertedFilename;
                    link.href = dataURL;
                    
                    // Trigger download
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);

                    showStatus(`Successfully downloaded ${convertedFilename}`, 'success');
                    
                    // Show success message
                    showSuccessMessage(`✓ Downloaded: ${convertedFilename}`);
                    
                    // Track download event
                    if (typeof dataLayer !== 'undefined') {
                        dataLayer.push({
                            'event': 'tool_download',
                            'toolName': 'Image Converter',
                            'outputFormat': selectedFormat,
                            'quality': quality
                        });
                    }
                    
                } catch (error) {
                    console.error('Download error:', error);
                    showStatus(`Error: ${error.message || 'Download failed'}`, 'error');
                } finally {
                    processing.style.display = 'none';
                    downloadBtn.disabled = false;
                }
            }, 100); // Small delay to allow UI update
        }

        function getConvertedFilename(originalName, targetFormat) {
            const nameWithoutExt = originalName.substring(0, originalName.lastIndexOf('.')) || originalName;
            return `${nameWithoutExt}.${targetFormat}`;
        }

        function updateQualityInfo() {
            if (selectedFormat === 'png') {
                qualityInfo.textContent = 'Lossless';
            } else {
                qualityInfo.textContent = `${Math.round(quality * 100)}%`;
            }
        }

        function updateDownloadButton() {
            if (currentImage) {
                downloadBtn.disabled = false;
                downloadBtn.innerHTML = '<i class="fas fa-download"></i> Download as ' + selectedFormat.toUpperCase();
            } else {
                downloadBtn.disabled = true;
                downloadBtn.innerHTML = '<i class="fas fa-download"></i> Download Converted Image';
            }
        }

        function resetState() {
            currentImage = null;
            originalFile = null;
            downloadBtn.disabled = true;
            processing.style.display = 'none';
            showStatus('', '');
        }

        // Universal download helper
        function downloadData(data, filename, mimeType) {
            try {
                if (data instanceof HTMLCanvasElement) {
                    data.toBlob(function(blob) {
                        if (blob) {
                            const url = URL.createObjectURL(blob);
                            triggerDownload(url, filename);
                            setTimeout(() => URL.revokeObjectURL(url), 100);
                        }
                    }, mimeType);
                } else if (data instanceof Blob) {
                    const url = URL.createObjectURL(data);
                    triggerDownload(url, filename);
                    setTimeout(() => URL.revokeObjectURL(url), 100);
                } else {
                    const blob = new Blob([data], { type: mimeType });
                    const url = URL.createObjectURL(blob);
                    triggerDownload(url, filename);
                    setTimeout(() => URL.revokeObjectURL(url), 100);
                }
            } catch (error) {
                console.error('Download failed:', error);
                alert('Download failed. Please try again.');
            }
        }

        function triggerDownload(href, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = href;
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Success message function
        function showSuccessMessage(message) {
            const successMessage = document.createElement('div');
            successMessage.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-weight: 500;
            `;
            successMessage.textContent = message;
            document.body.appendChild(successMessage);

            setTimeout(() => {
                if (successMessage.parentNode) {
                    successMessage.parentNode.removeChild(successMessage);
                }
            }, 3000);
        }

        // Prevent blank page issues
        window.addEventListener('error', function(e) {
            console.error('Page error:', e.error);
        });

        // Ensure page loads properly
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Image Converter page loaded successfully');
        });
    </script>
</body>
</html>
